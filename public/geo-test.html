<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–¢–µ—Å—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∞–¥—Ä–µ—Å–∞</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    input {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      margin-top: 10px;
    }
    button {
      padding: 10px 15px;
      font-size: 16px;
      cursor: pointer;
    }
    .status {
      margin-top: 15px;
      color: #555;
    }
  </style>
</head>
<body>

<h2>üìç –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞</h2>

<button id="geoBtn">–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–æ–π –∞–¥—Ä–µ—Å</button>

<input id="address" type="text" placeholder="–ê–¥—Ä–µ—Å –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å">

<div class="status" id="status"></div>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA4JfX17OUSfXCj58BuLMD2X8g1kQ55gW4"></script>

<script>
const btn = document.getElementById('geoBtn');
const addressInput = document.getElementById('address');
const statusDiv = document.getElementById('status');

btn.addEventListener('click', () => {
  statusDiv.textContent = '–û–ø—Ä–µ–¥–µ–ª—è–µ–º –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ...';

  if (!navigator.geolocation) {
    statusDiv.textContent = '–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º';
    return;
  }

  navigator.geolocation.getCurrentPosition(
    position => {
      const lat = position.coords.latitude;
      const lng = position.coords.longitude;

      statusDiv.textContent = '–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–æ–ª—É—á–µ–Ω—ã, –∏—â–µ–º –∞–¥—Ä–µ—Å...';

      const geocoder = new google.maps.Geocoder();

      geocoder.geocode(
        { location: { lat, lng } },
        (results, status) => {
          if (status === 'OK' && results[0]) {
            addressInput.value = results[0].formatted_address;
            statusDiv.innerHTML = `
              ‚úÖ –ê–¥—Ä–µ—Å –Ω–∞–π–¥–µ–Ω<br>
              <small>Lat: ${lat}<br>Lng: ${lng}</small>
            `;
          } else {
            statusDiv.textContent = '–ê–¥—Ä–µ—Å –Ω–µ –Ω–∞–π–¥–µ–Ω';
          }
        }
      );
    },
    error => {
      statusDiv.textContent = '–î–æ—Å—Ç—É–ø –∫ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –∑–∞–ø—Ä–µ—â—ë–Ω';
    },
    {
      enableHighAccuracy: true,
      timeout: 10000
    }
  );
});
</script>

</body>
</html>
